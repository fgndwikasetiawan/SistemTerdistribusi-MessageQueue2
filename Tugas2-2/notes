#client
#print("Mengirim file...")
#data = StringIO.StringIO(data)
#socket.send_pyobj(data)
#print("File terkirim!")
#data = socket.recv_pyobj()
#print("File grayscale telah diterima, menyimpan...")
#outputfile = open('1.png', 'wb')
#outputfile.write(data.getvalue())
#print("File tersimpan!")





#server
import zmq
import os
from PIL import Image
import StringIO

os.chdir('C:/Users/Wik/Documents/Kuliah/Sistem Terdistribusi/urgh/sister dataset(1)')

context = zmq.Context()
socket = context.socket(zmq.REP)
socket.bind('tcp://*:5555')
img = Image.open(socket.recv_pyobj())
print("File gambar diterima, mengkonversi...")
img = img.convert('L')
data = StringIO.StringIO()
img.save(data, "PNG")
print("Konversi selesai, mengirim file...")
socket.send_pyobj(data)
print("Selesai mengirim data")